<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	  <meta name="author" content="Brendan Griffen" />
    <meta name="description" content="A human exploring the very large and the very small.">
    <link rel="favicon" href="/static/img/favicon.ico">

    
      <title>Creating a GUI in Python</title>
    
	
    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ=="
    crossorigin="anonymous">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

	<!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="/static/css/main.css" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old" />
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" type="text/css" href="/static/css/syntax.css" />

    <!-- Google Analytics -->
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2011187-3', 'auto');
  ga('send', 'pageview');

</script>
  </head>
  <!-- Main Body-->
  <body>
  <!-- Wrap all page content here -->
  <div id="wrap">
    <!-- Navbar header -->
    <nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="/"><i class="fa fa-home"></i></a>
    </div>
    <div id="navbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/blog.html">BLOG</a></li>
        <li><a href="/bio.html"">BIO</a></li>
        <li><a href="/scaledbiolabs.html">BIOTECH</a></li>
        <li><a href="/astrophysics.html">ASTROPHYSICS</a></li>
        
      </ul>
    </div>
  </div>
  <script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" id="st_insights_js" src="http://w.sharethis.com/button/buttons.js?publisher=4c4961d4-1888-423c-9cce-30a753eaf0e0"></script>
<script type="text/javascript">stLight.options({publisher: "4c4961d4-1888-423c-9cce-30a753eaf0e0", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

</nav>

    <div class="container">
	<div class="blog-post">
		<h3>
		  <strong><a href="/creating-a-GUI-in-Python.html">Creating a GUI in Python</a></strong>
		</h3>
	</div>
	<div class="blog-title">
		<h4>
		February 26, 2014
			&nbsp;&nbsp;
			
			 <span class="label label-success">python</span>
			
			 <span class="label label-success">viz</span>
			
			 <span class="label label-success">interactive</span>
			
		</h4>
	</div>
	<div class="panel panel-default">
		<div class="panel-body">
			<div class="blogpost">
			  <p>So you want to create a Graphical User Interface (GUI)? This tutorial/code might help getting you started. The first feeling I had when I decided to follow this path was <em>intimidation</em>. With much patience and Googling I managed to create something I think will save me time in the future. I&rsquo;ve used this tool countless times already, whether it be to improve my intuition of complex functions, speed up work flows or render dynamic data. The entire Pythonic GUI template I am about to introduce can be found at its own <a href="https://github.com/bgriffen/PythonGUITemplate">Github repository</a>.</p>

<h2>Where do I start?</h2>

<p>Back in December of 2012, I wanted a tool which got me up and running relatively quickly without too much extra “fluff”. After some searching I found <a href="https://github.com/enthought/traits">Traits/TraitsUI</a>. It seemed like a good option since it allowed me to integrate a bunch of other features I already used at the time (e.g. matplotlib for plotting and <a href="http://mayavi.sourceforge.net/">Mayavi</a> for rendering) within one distribution. Enthought state it best.</p>

<blockquote><p>The TraitsUI package is a set of user interface tools designed to complement Traits. In the simplest case, it can automatically generate a user interface for editing a Traits-based object, with no additional coding on the part of the programmer-user.</p></blockquote>

<p>Conveniently, all of the tools required to get you started (and then some) come with the <a href="https://www.enthought.com/">Enthought distribution</a>. For more background on TraitsUI there is (as always) <a href="https://www.youtube.com/watch?v=ohHoU4qvsNs">a Youtube tutorial</a>. First we need to install our required tools.</p>

<h2>Requirements</h2>

<h4>Installing EPD</h4>

<p>Download the <a href="https://www.enthought.com/">Enthought distribution tools</a> appropriate for your system. If you have an academic email then you can get it for free. Be sure to get the <strong>32-bit</strong> (rh5) version as the 64-bit version does not contain Mayavi. If you&rsquo;re on OSX then just get the .dmg image for OSX.</p>

<pre><code class="bash">bash epd-7.3-2-rh5-x86.sh 
</code></pre>

<p><em>edit</em>: if you don&rsquo;t want to use EPD&rsquo;s distribution and just want to use standalone <code>TraitsUI</code>, please change the import modules inside the <code>Common.py</code> folder to the following (you will need <a href="https://github.com/enthought/traitsui">TraitsUI</a> however):</p>

<pre><code class="python">from traits.api import *
from traitsui.api import View,UItem, Item, Group, Heading, Label, \
        HSplit, Handler, CheckListEditor, EnumEditor, TableEditor, FileEditor, \
        ListEditor, Tabbed, VGroup, HGroup, RangeEditor, Spring, spring
from traitsui.menu import NoButtons
from traitsui.wx.editor import Editor
from traitsui.wx.basic_editor_factory import BasicEditorFactory
from traitsui.api import ColorTrait
</code></pre>

<p>Keep in mind the software may be updated so some of these imports might not work in future versions.</p>

<h4>Getting the GUI template</h4>

<p>If you want to cut to the chase you can <a href="" title="https://github.com/bgriffen/PythonGUITemplate">clone the template from the respository</a> and run in your terminal window:</p>

<pre><code class="python">python main.py
</code></pre>

<p>This should open up the template window with an empty canvas. Explore the code structure though there will be more on this later.</p>

<h2>Googling &ldquo;make a GUI using Traits in Python&rdquo;</h2>

<p>Much to my surprise, there are few examples of how to get started using TraitsUI. Sure you can build very small tool with a slide bar which changes one variable and re-plots it – but there is nothing which brings it all together: multiple tabs, plotting and 3D rendering. The <a href="http://docs.enthought.com/traitsui/tutorials/traits_ui_scientific_app.html#the-gui-elements">examples provided in the documentation</a> are either too basic or too complex for my liking so I spent a few months trying to create something in between &ndash; basically what I wished the Internet had 12 months ago. Back in December 2012, I was transitioning my core research language to Python which took only a short while as I came from MATLAB/FORTRAN/SQL-land. I eventually built <a href="https://github.com/bgriffen/cme">a few useful tools</a> (well at least for me and my research group) with what I’m about to discuss.  Here is the most sophisticated example available in the documentation:
<br/>
<br/>
<img src="/assets/pythongui/TraitsExample.png" alt="Traits Example" />
<br/>
<br/>
Good start right? Whilst it does bring together the main ideas, it didn’t immediately give me a blank slate. It uses a bunch of Pythonic features which at the time I was not familiar with. The <a href="http://docs.enthought.com/traitsui/tutorials/traits_ui_scientific_app.html#the-gui-elements">documentation</a> also didn’t incrementally build up to it. It was a steep learning curve and I often found myself in very deep water.</p>

<h2>Introducing: &ldquo;The Blank Slate&rdquo;</h2>

<p>To create the blank slate, I essentially had to take apart what was already available in the above example whilst being sure I didn’t remove any critical components of the application. This soon became tedious and I felt like I wasn’t learning anything new. There were also a number of features in the basic layout which were not included (e.g. 3D rendering). This was shortly remedied by finding out that Traits does <a href="http://docs.enthought.com/mayavi/mayavi/auto/example_mayavi_traits_ui.html">play nicely with Mayavi</a>. Though my problem now became that of integration: these features existed independent from one another and I couldn’t find anywhere to put them all together (interactivity, plotting, 3D rendering). Eventually, after much head scratching I got it all working. I then stripped it down with the help of a colleague (<a href="https://twitter.com/astrowizicist">@astrowizicist</a>) to create the following. I now use it as my default template to create new scientific applications.
<br/>
<br/>
<img src="/assets/pythongui/PythonGUIEx1-1024x599.png" alt="Traits Example" />
<br/>
<br/>
<img src="/assets/pythongui/PythonGUIEx2-1024x598.png" alt="Traits Example" /></p>

<h2>Code Layout</h2>

<p>Initially this was all constructed in one giant Python script but eventually it became unmanageable with all of the objects involved in my application so I broke it down into the following set of modules which can be <a href="https://github.com/bgriffen/PythonGUITemplate">found in the source</a> (<a href="http://git-scm.com/downloads">install git</a>, a version control system and clone the repository to get started). If you haven&rsquo;t already <a href="https://github.com/bgriffen/PythonGUITemplate">downloaded the code</a> I highly suggest you do so now so you are familiar with what I&rsquo;m about to discuss.</p>

<pre><code class="python">main.py
</code></pre>

<p>This contains the master script which controls the application and integrates everything. Once you’ve installed the <a href="https://support.enthought.com/entries/23407541-Getting-Started-with-EPD-on-OS-X">Enthought Python Distribution tools</a>, you can just run this from the command line <code>python main.py</code> and it should launch.</p>

<pre><code class="python">Common.py
</code></pre>

<p>This contains all of the modules which are used globally across the application. You can import function specific modules deeper in the code to improve launch time if you like as well. <code>Common.py</code> also constructs the matplotlib figure where you will be plotting (left panel). You’ll also find it imports a whole bunch of other things such as:</p>

<pre><code class="python">from enthought.traits.ui.api import View,UItem, Item, Group, Heading, \
Label, HSplit, Handler, CheckListEditor, EnumEditor, TableEditor, \
ListEditor, Tabbed, VGroup, HGroup, RangeEditor, Spring, spring
</code></pre>

<p>All of these are just apart of the Traits API which you call to put in your GUI. You’ll see how these are used later. I’ve also added a bunch of other commonly used modules for scientific processing but you can remove these if you don’t need them.</p>

<pre><code class="python">firstcalc.py
secondcalc.py
</code></pre>

<p>These are effectively the tabs on the right hand panel and the place where you will add your buttons, sliders, tables. They both contain a clone of (roughly) the same thing:</p>

<pre><code class="python">class FirstCalc(HasTraits):
    view = View()
    def __init__(self, main, **kwargs):
        HasTraits.__init__(self)
        self.main = main
</code></pre>

<h2>Adding Some Basic Functionality</h2>

<p>Say for instance you want to add a few of the typical buttons, directories etc. Traits has to offer. Your firstcalc.py simply becomes:</p>

<pre><code class="python">from Common import *
class FirstCalc(HasTraits):
    # Add Traits objects
    option = Bool(True)
    rangex = Range(1,10,5)
    yval = Float()
    listoptions = Enum(['Option 1', 'Option 2','Option 2'])
    stringopt = Str("Default string which can also be empty.")
    stringoptread = Str("Default string which can also be empty [read-only version].")
    masterpath = Directory(os.getcwd())
    button1 = Button("Button 1 Name")
    floatval = Float()
    changedcount = Int()

    #Construct the view
    view = View(
                Item(name='rangex',label='X-Value'),
                Item(name='yval',style='readonly',label='1/x',format_str='%.2e'),
                Item(name='listoptions',label='list of options'),
                Item(name='stringopt'),
                Item(name='stringoptread',style='readonly'),
                Item(name='masterpath',label='Directory'),
                Group(Item(name='button1',show_label=False)),
                Group(Item(name='option',label='Boolean Option')
                     ,enabled_when='floatval &lt; 0.5',label='Enabled Area Upon Random Value &lt; 0.5',show_border=True),
                Item(name='changedcount',style='readonly',label='Attempts'),
                Item(name='floatval',label='random generated')
                )

    def _rangex_changed(self):
        self.yval = 1./self.rangex

    def _button1_fired(self):
        self.changedcount += 1
        self.floatval = random.random()

    def _floatval_changed(self):
        self.stringopt = "Hey, you changed the integer value!"

    def __init__(self, main, **kwargs):
        HasTraits.__init__(self
</code></pre>

<p>So let’s see what we’ve added when we relaunch.
<br/>
<br/>
<img src="/assets/pythongui/PythonGUIEx3-1024x599.png" alt="Traits Example" />
<br/>
<br/>
<img src="/assets/pythongui/PythonGUIEx4Zoom.png" alt="Traits Example" />
<br/>
<br/>
Slide the X-value ruler we see the objects change accordingly.
<br/>
<br/>
<img src="/assets/pythongui/PythonGUIEx5.png" alt="Traits Example" />
<br/>
<br/>
Hopefully you can match up each of the objects with what is in the code. It is hard to convey the interactivity here but I can show a snapshot. Let’s change the slider and hit the button a few times.
<br/>
<br/>
<img src="/assets/pythongui/PythonGUIEx6.png" alt="Traits Example" />
<br/>
<br/>
As we can see from the code the output is simply 1/x which is updated in real-time. Also when I hit the button, a random number is generated. If that number is less than 0.5 then the enabled area becomes illuminated and we can access the objects within (i.e. the Boolean option).  This should give you a basic idea of how to add certain button. Now we want to plot something, say y = mx + c where x and c are dynamic. I added three objects needed:</p>

<pre><code class="python">plotbutton = Button("Plot Me!")
yintcept = Range(0.0,5.,10.)
gradient = Range(0.0,5.0,10.)
</code></pre>

<p>which is inserted into the View() object just like the other objects.</p>

<pre><code class="python">Group(Item(name='gradient',label='gradient'),
      Item(name='yintcept',label='y-intercept'),
      Item(name='plotbutton',show_label=False),show_border=True,label='Plotting Area')
</code></pre>

<p>We also need to add an action for when the plot button is fired.</p>

<pre><code class="python">def _plotbutton_fired(self):
    y = self.gradient * np.array(range(10)) + self.yintcept
    figure = self.main.display
    figure.clear()
    ax = figure.add_subplot(111)
    ax = self.main.display.axes[0]
    ax.plot(np.array(range(10)),y,color=self.main.markercolor,
            marker=self.main.markerstyle,
            markersize=self.main.markersize,
            markeredgewidth=0.0,
            linestyle='-')
    wx.CallAfter(self.main.display.canvas.draw)
</code></pre>

<p><img src="/assets/pythongui/PythonGUIEx7-1024x599.png" alt="Traits Example" />
<br/>
<br/>
Also note how the marker style and marker size is “brought in” or inherited from main.py via self.main.xxx. It is hard to convey here (<a href="https://github.com/bgriffen/PythonGUITemplate">try it out!</a>), but that now allows you to change the gradient and y-intercept dynamically and it updates on the plot in real-time. It is a much more intuitive (and faster) way to examine complex functions where it is unclear by looking at it how it will change using different inputs.</p>

<h2>Adding Mayavi Functionality</h2>

<p>To implement Mayavi functionality you simply add the following (or something similar which uses your underlying data) to a button function which runs when fired (as above). This will produce something like the next image in the left panel.  There is also some limited documentation here.</p>

<pre><code class="python">def _mayavibutton_fired(self):
    self.main.scene.mlab.clf(figure=self.main.scene.mayavi_scene)
    x = np.array(data['posX'])
    y = np.array(data['posY'])
    z = np.array(data['posZ'])
    vx = np.array(data['pecVX'])
    vy = np.array(data['pecVY'])
    vz = np.array(data['pecVZ'])
    self.main.scene.mlab.quiver3d(x,y,z,vx,vy,vz)
    self.main.scene.mlab.xlabel('x-pos')
    self.main.scene.mlab.ylabel('y-pos')
    self.main.scene.mlab.zlabel('z-pos')
    self.main.scene.mlab.colorbar(title='velocity [km/s]')
    self.main.scene.mlab.show()
    self.main.scene.mlab.outline()
</code></pre>

<p>That’s the end of my “tutorial/demo” section. If you want to learn how to use the various other layout and object options I suggest taking a look at one of the tools I developed.</p>

<h2>Example Project</h2>

<p>The <a href="http://caterpillar.scripts.mit.edu/www/">Catepillar Project</a> is one of my main research tasks at MIT which involves looking at several hundreds of simulations of a similar kind. Rather than building endless panels in Matplotlib and tediously plotting different marker types and colors to inspect the data I decided to automate it using the tools described. Thus was born <a href="https://github.com/bgriffen/cme">Caterpillar Made Easy</a> which is one such tool which which allows you setup and run cosmological simulations on a large cluster, inspect the data dynamically in two and three dimensions. It is based on exactly the same template I have shown above (plus a few hundred hours of coding!). Here are a few screen shots of the sort of thing you can do in this environment. Perhaps you have a study you’re doing which might also benefit from such interactivity and automation. I haven&rsquo;t <em>officially</em> released it to the public but I might do so soon. This is just to give you an idea of the sort of things you can achieve. See the project on <a href="https://github.com/bgriffen/cme">Github</a>.</p>

<p><br/>
<img src="/assets/pythongui/inspectparams-1024x620.png" alt="Traits Example" />
<br/>
<br/>
<img src="/assets/pythongui/contaminationheatmap-1024x616.png" alt="Traits Example" />
<br/>
<br/>
<img src="/assets/pythongui/velocityhaloinspection-1024x619.png" alt="Traits Example" />
<br/>
<br/></p>

<p>Head to the repository to see more screenshots. If there is a button, or particular feature you want, you can check through the source code to see how it is generated. Just check the <code>View()</code> section which is usually near the top. The rest of the code is just calculations etc. which is specific to the problems I am trying to solve. If you have questions about how to get started, please leave a comment below or if it is more technical in nature, drop me a line via email. Good luck and remember if you are new to this kind of thing: <em>be patient</em> &ndash; good things will come.</p>

			  <hr>
			  <center>To be notified of future posts, please <a href="https://feeds.feedburner.com/brendangriffen"><i class="fa fa-fw fa-rss-square"></i>click here</a>.</center>
			  <div class="socialsmall">
	<h4>
        <center>
    
      <a href="mailto:brendan.f.griffen@gmail.com"><i class="fa fa-envelope"></i></a>
    

    
	  <a href="http://github.com/bgriffen"><i class="fa fa-github"></i></a>
    
    
    
	  <a href="http://twitter.com/brendangriffen"><i class="fa fa-twitter"></i></a>
    
    
	  <a href="http://linkedin.com/in/brendangriffen"><i class="fa fa-linkedin"></i></a>
    
    
	  <a href="http://stackoverflow.com/users/1495869/griff"><i class="fa fa-stack-overflow"></i></a>
    
    
    <a href="https://feeds.feedburner.com/brendangriffen"><i class="fa fa-rss-square"></i></a>
    
    </center>
	</h4>
</div>


			   <div class="related-posts">
			   <hr>
				   <h5>Related Posts</h5>
				   
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	June 11, 2016
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="//goodbye-astronomy-for-now.html">Goodbye Astronomy, Part 1: How I got here</a></strong>
								 </h6>
							 </div>
						</div>
					
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	April  4, 2016
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="//analysis-of-hubble-einstein-sagan-fellowship-holders-with-ads.html">Hubble, Einstein and Sagan Fellows With ADS</a></strong>
								 </h6>
							 </div>
						</div>
					
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	March  6, 2016
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="//mapping-astronomy-publications.html">Mapping Astronomy Publications</a></strong>
								 </h6>
							 </div>
						</div>
					
			   </div>
			</div>
		</div>
	</div>
	
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//brendangriffen.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                


</div>


  </div>
  <!-- Footer -->

  <footer>
    <div id="footer">
        <div class="container">
            <p class="text-muted">© Brendan Griffen 2016. Powered by <a href="http://jekyllrb.com/">Jekyll.</p>
        </div>
    </div>
</footer>
<div class="footer"></div>

  

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"
    integrity="sha256-Sk3nkD6mLTMOF0EOpNtsIry+s1CsaqQC1rVLTAy+0yc= sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ=="
    crossorigin="anonymous"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="/static/js/docs.min.js"></script>
    <script src="/static/js/main.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/static/js/ie10-viewport-bug-workaround.js"></script>

    <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>


  </body>
</html>
