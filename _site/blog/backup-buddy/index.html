<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Backup Buddy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Bash script to backup your work to a server.">
  <!-- rss feed -->
  <link rel="alternate" type="application/rss+xml" 
  title="RSS Feed for brendangriffen.com" 
  href="http://feeds.feedburner.com/brendangriffen" />

  <!-- favicon -->
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="http://sebpearce.com/assets/">
  <meta name="twitter:title" content="Backup Buddy">
  <meta name="twitter:description" content="Bash script to backup your work to a server.">
  <meta name="twitter:creator" content="@_sebu_">

  <!-- Open Graph -->
  <meta property="fb:admins" content="673372761">
  <meta property="fb:app_id" content="646320802089541">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
  <meta property="og:image" content="http://sebpearce.com/assets/">
  <meta property="og:title" content="Backup Buddy">
  <meta property="og:description" content="Bash script to backup your work to a server.">
  <meta property="og:url" content="http://brendangriffen.com/blog/backup-buddy/">
  <meta property="og:site_name" content="sebpearce.com">

  <link href='http://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,400italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:300italic,700italic,700,300' rel='stylesheet' type='text/css'>

  <!-- font-awesome CSS -->
  <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/main.css">        

  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="/css/syntax.css">

</head>
<body>
    
  

<div class="masthead">
  <div class="masthead-container">
    <div class="rootlink-container">
      <a href="/" class="rootlink">
        <h3 class="myname">Brendan Griffen</h3><br>
        <h4 class="mydescription">Astrophysicist, data enthusiast, ponderer, human.</h4>
      </a>
    </div>
    <ul class="main-menu"><a href="/"><li>Blog</li></a>
      <a href="/projects/"><li>Projects</li></a>
      <a href="/about/"><li>About</li></a>
      <a href="/vitae/"><li>Vitae</li></a>
      <a href="/contact"><li>Contact</li></a>
        <!-- <li><a target="_blank" href="http://feedburner.google.com/fb/a/mailverify?uri=brendangriffen&amp;loc=en_US"> -->
      <!-- <a target="_blank" href="http://feedburner.google.com/fb/a/mailverify?uri=brendangriffen&amp;loc=en_US"><li>Subscribe</li></a> -->
    </ul>
    <ul class="socialmedia">
      <li title="GitHub"><a href="http://github.com/bgriffen" class="fa fa-github fa-2x" rel="nofollow"></a></li>
      <li title="Email"><a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;brendan.f.griffen&#64;gmail.com" class="fa fa-envelope fa-2x"></a></li>
      <li title="Twitter"><a href="http://twitter.com/brendangriffen" class="fa fa-twitter fa-2x"></a></li>
      <li title="RSS"><a href="http://feeds.feedburner.com/brendangriffen" class="fa fa-rss-square fa-2x"></a></li>
    </ul>
    <div style="clear:both;"></div>
  </div> <!-- end of masthead-container -->
</div> <!-- end of masthead -->


    
    <article>
      <div class="content">

        <h1>Backup Buddy</h1>
<p class="meta">05 December 2012</p>


<div class="post">
  <p><a href="http://www.youtube.com/watch?v=yIz9eqwLt9U">It nearly happened to Toy Story 2</a>, it could happen to you. I’ve come close on many occasions to losing my entire life’s work. At some point (existential reasons aside), I decided to write a small script to backup everything I needed should my laptop explode. I’ve stripped it down and provided it to you.</p>

<p>I’ve written a little bash script to backup a particular folder to a server. It creates a tar file and then synchronises the directories. In the header of the file you will have to change it to suit your needs. You will need to execute it every time you want to backup your work, though this can be easily automated using <a href="https://bradmontgomery.net/blog/automatic-backups-with-cron-tar-and-ssh/#">cron</a>.</p>

<p><center>
<div markdown="0"><a href="https://github.com/bgriffen/backupbuddy" class="btn">Github Repository</a></div>
</center></p>

<div class="highlight"><pre><code class="bash"><span class="c">#!/bin/bash</span>
<span class="c"># backupbuddy.sh</span>
 
<span class="c"># Author: Brendan Griffen</span>
<span class="c"># Contact: brendan.f.griffen@gmail.com</span>
<span class="c"># Created: 2012/06/25</span>
<span class="c"># Copyright (c) 2012 Brendan Griffen. All rights reserved.</span>
 
<span class="c"># Description: Performs a compression of a given folder, and rsyncs</span>
<span class="c"># compressed folder to destination (server). </span>
 
<span class="c"># Usage: Bash</span>
 
<span class="c">#########################################################</span>
<span class="c">#            PLEASE ADJUST THE FOLLOWING!               # </span>
<span class="c">#########################################################</span>
<span class="c"># YOUR USERNAME</span>
<span class="nv">USERNAME</span><span class="o">=</span><span class="s2">&quot;myusername&quot;</span>
<span class="c"># SERVER ADDRESS TO PUT BACKUP ON</span>
<span class="nv">SERVERNAME</span><span class="o">=</span><span class="s2">&quot;server.address.com&quot;</span>
<span class="c"># DIRECTORY ON ORIGIN COMPUTER TO BACKUP</span>
<span class="nv">ORIGIN_DIR</span><span class="o">=</span><span class="s2">&quot;/folder/origin/&quot;</span>
<span class="c"># DESTINATION DIRECTORY ON SERVER TO PUT BACKUP</span>
<span class="nv">DESTIN_DIR</span><span class="o">=</span><span class="s2">&quot;/destination/folder/on/server/&quot;</span>
<span class="c">#########################################################</span>
<span class="nv">SCRIPT_DIR</span><span class="o">=</span><span class="nv">$PWD</span><span class="s2">&quot;/&quot;</span>              <span class="c"># CURRENT WORKING DIRECTORY</span>
<span class="nv">DATE</span><span class="o">=</span><span class="sb">`</span>date +%F<span class="sb">`</span>                 <span class="c"># GET DATE</span>
<span class="nv">TARFILE</span><span class="o">=</span><span class="nv">$DATE</span>-backup.tar        <span class="c"># CREATE TAR FILENAME</span>
<span class="nv">BZIP</span><span class="o">=</span><span class="nv">$DATE</span>-backup.tar.bz2       <span class="c"># CREATE BZIP FILENAME</span>
<span class="k">if</span> <span class="o">[</span> -f <span class="nv">$SCRIPT_DIR$TARFILE</span> <span class="o">]</span>
<span class="k">then</span>
<span class="k">    </span>rm <span class="nv">$SCRIPT_DIR$TARFILE</span>      <span class="c"># IF EXISTS, THEN DELETE</span>
    rm <span class="nv">$SCRIPT_DIR$BZIP</span>         <span class="c"># IF EXISTS, THEN DELETE</span>
<span class="k">fi</span>
<span class="nb">echo</span> <span class="s1">&#39;+ BACKUP BUDDY COMMENCING&#39;</span>
<span class="nb">echo</span> <span class="s1">&#39;+ CRUNCHING FILES -- PLEASE DONT HURT ME&#39;</span>
tar -zcf <span class="nv">$TARFILE</span> <span class="nv">$ORIGIN_DIR</span>   <span class="c"># CREATE TAR FILE</span>
bzip2 <span class="nv">$TARFILE</span>                  <span class="c"># COMPRESS FILE</span>
<span class="c"># synchronise directories (computer &gt;&gt;&gt; server)</span>
<span class="nb">echo</span> <span class="s1">&#39;+ OK, OK, FINAL HEADS UP - PLEASE CHECK!&#39;</span>
<span class="nb">echo</span> <span class="s1">&#39;-- FROM:&#39;</span> <span class="nv">$SCRIPT_DIR$BZIP</span>
<span class="nb">echo</span> <span class="s1">&#39;-- TO:  &#39;</span> <span class="nv">$USERNAME</span><span class="s2">&quot;@&quot;</span><span class="nv">$SERVERNAME</span><span class="s2">&quot;:&quot;</span><span class="nv">$DESTIN_DIR</span>
rsync -rlptDHSx -W --delete <span class="nv">$BZIP</span> <span class="nv">$USERNAME</span><span class="s2">&quot;@&quot;</span><span class="nv">$SERVERNAME</span><span class="s2">&quot;:&quot;</span><span class="nv">$DESTIN_DIR</span>
<span class="c"># remove .tar file from laptop</span>
<span class="nb">echo</span> <span class="s1">&#39;+ REMOVING TRASH AT ORIGIN&#39;</span>
<span class="k">if</span> <span class="o">[</span> -f <span class="nv">$SCRIPT_DIR$BZIP</span> <span class="o">]</span>
<span class="k">then</span>
<span class="k">    </span>rm <span class="nv">$SCRIPT_DIR$BZIP</span>         <span class="c"># IF EXISTS, THEN DELETE</span>
<span class="k">fi</span>
<span class="nb">echo</span> <span class="s1">&#39;+ NOM NOM ALL DONE&#39;</span>
</code></pre></div>

</div>

<div class="footer">

  Share:
  <span class="social">
    <a class="facebook-share" href="http://www.facebook.com/sharer/sharer.php?app_id=646320802089541&u=http://brendangriffen.com/blog/backup-buddy/" onclick="javascript:window.open(this.href,
    '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;">
      <i class="fa fa-facebook-square"></i>
    </a>&nbsp;
    <a class="twitter-share" href="https://twitter.com/share?url=&text=Backup Buddy+(via+@brendangriffen)" onclick="javascript:window.open(this.href,
    '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=260,width=600');return false;">
      <i class="fa fa-twitter-square"></i>
    </a>&nbsp;
    <a class="google-share" href="https://plus.google.com/share?url=http://brendangriffen.com/blog/backup-buddy/" onclick="javascript:window.open(this.href,
    '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
        <i class="fa fa-google-plus-square"></i>
    </a>
  </span>
  <br>
  Follow: <strong><a class="follow-me-link" href="https://twitter.com/brendangriffen">@brendangriffen</a></strong>

</div>


<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'brendangriffen'; // required: replace example with your forum shortname
    var disqus_identifier = '/blog/backup-buddy';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        
      </div> <!-- end of content -->
    </article>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-48672309-1', 'brendangriffen.com');
  ga('send', 'pageview');
  </script>

</body>
</html>
